<app-header 
  [title]="ruta ? 'Editar Ruta': 'Agregar Ruta'"
  [isModal]="true"
/>

<ion-content class="ion-padding">

  <form [formGroup]="form" (ngSubmit)="submit()">

    <custom-input 
      [control]="form.controls.nombre"
      type="text"
      label="Nombre"
      autocomplete="off"
    />

    <ion-item class="custom-input" lines="none">
      <ion-select
        aria-label="Pais" 
        formControlName="pais"
        placeholder="Pais">
        <ion-select-option
          *ngFor="let pais of paises"
          [value]="pais.name"
        >
          {{pais.name | titlecase}}
        </ion-select-option>
      </ion-select>
    </ion-item>

    
    <ion-item 
      *ngIf="form.controls.pais?.value.length > 0"
      class="custom-input" 
      lines="none">
      <ion-select
        aria-label="Departamento" 
        formControlName="estado"
        placeholder="Departamento">
        <ion-select-option
          *ngFor="let estado of estados"
          [value]="estado.name"
        >
          {{estado.name | titlecase}}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item 
      *ngIf="form.controls.estado?.value.length > 0"
      class="custom-input" 
      lines="none">
      <ion-select
        aria-label="Ciudad" 
        formControlName="ciudad"
        placeholder="Ciudad">
        <ion-select-option
          *ngFor="let city of cities"
          [value]="city.name"
        >
          {{city.name | titlecase}}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <ion-item class="custom-input" lines="none">
      <ion-toggle
        [enableOnOffLabels]="true"
        formControlName="ingresar_gastos_cobrador"
      >Permitir que el cobrador ingrese gastos</ion-toggle> 
    </ion-item>

    <ion-button mode="ios" type="submit" expand="block" [disabled]="form.invalid">
      {{ruta ? 'Actualizar Ruta' : 'Agregar Ruta'}}
      <ion-icon slot="end" name="checkmark-circle-outline"></ion-icon>
    </ion-button>
  </form>

</ion-content>